Before:
  messages clear

~ 1 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Given mail (From body):
  Cum sociis natoque penatibus et magnis dis parturient montes,
  nascetur ridiculus mus. [0]

  Links:

  [0]: http://www.loremipsumdolorsitamet.com
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Execute:
  call cursor(2, 27)
  let out = execute('LinkOpen')
  let message = split(out, "\n")[0]
  let exp = 'http://www.loremipsumdolorsitamet.com'
  AssertEqual exp, message

~ 2 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Given mail  (From reference section):
  Cum sociis natoque penatibus et magnis dis parturient montes,
  nascetur ridiculus mus. [0]

  Links:

  [0]: http://www.loremipsumdolorsitamet.com
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Execute:
  call cursor('$', 1)
  let out = execute('LinkOpen')
  let message = split(out, "\n")[0]
  let exp = 'http://www.loremipsumdolorsitamet.com'
  AssertEqual exp, message

~ 3 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Given mail (Line without link):
  Praesent semper magna. In eu justo. Nunc vitae risus nec
  sem scelerisque consequat. In hac habitasse platea dictumst. Nam posuere
~~~~~~~~~~~~~~~~~~~~~~~~~
Execute:
  let out = execute('LinkOpen')
  let message = split(out, "\n")[0]
  let exp = 'link.vim: No link found under cursor'
  AssertEqual exp, message

~ 4 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Given mail (Invalid URL: no protocol):
  [0] penatibus et magnis dis parturient montes,
  nascetur ridiculus mus.

  Links:

  [0]: loremipsum.com
~~~~~~~~~~~~~~~~~~~~~~~~~
Execute:
  let out = execute('LinkOpen')
  let messages = split(out, "\n")
  let exp = []
  AssertEqual exp, messages

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
